table_name: Test_query_21
main_dttm_col: null
description: null
default_endpoint: null
offset: 0
cache_timeout: null
catalog: telegram_bot_db
schema: public
sql: "-- -- \u0420\u0430\u0441\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u0438\
  \u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432 \u043F\u043E \u0434\u043D\
  \u044F\u043C\n\n-- SELECT \n--     EXTRACT(day FROM question_date) AS day,\n-- \
  \    COUNT(*) AS question_count\n-- FROM llm_logs\n-- GROUP BY day\n-- ORDER BY\
  \ day;\n\n-- WITH daily_users AS (\n--     SELECT \n--         DATE(question_date)\
  \ AS day, \n--         COUNT(DISTINCT user_id) AS new_users\n--     FROM llm_logs\n\
  --     GROUP BY day\n-- )\n-- SELECT \n--     day,\n--     SUM(new_users) OVER (ORDER\
  \ BY day) AS cumulative_users\n-- FROM daily_users\n-- ORDER BY day;\n\n\n-- --\
  \ \u041A\u043E\u043B-\u0432\u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\
  \u0442\u0435\u043B\u0435\u0439\n-- select count (distinct(user_id)) from llm_logs;\n\
  \n-- -- \u0421\u0440\u0435\u0434\u043D\u0435\u0435 \u0432\u0440\u0435\u043C\u044F\
  \ \u043E\u0442\u0432\u0435\u0442\u0430\n\n-- SELECT \n--     AVG(response_time_s)\n\
  -- FROM llm_logs;\n\n-- -- \u0421\u0430\u043C\u044B\u0435 \u043F\u043E\u043F\u0443\
  \u043B\u044F\u0440\u043D\u044B\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B\n\
  -- SELECT \n--     question,\n--     COUNT(*) AS frequency\n-- FROM llm_logs\n--\
  \ GROUP BY question\n-- ORDER BY frequency DESC\n-- LIMIT 10;\n\n\n-- SELECT \n\
  --     COUNT(*) / NULLIF(COUNT(DISTINCT DATE(question_date)), 0) AS avg_requests_per_day\n\
  -- FROM llm_logs;\n\n-- -- \u0421\u0440\u0435\u0434\u043D\u0435\u0435 \u043A\u043E\
  \u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0432\u043E\u043F\u0440\u043E\u0441\
  \u043E\u0432 \u0432 \u0434\u0435\u043D\u044C\n-- with a as (\n--     SELECT \n--\
  \     COUNT(*) AS question_count\n--     FROM llm_logs\n--     GROUP BY user_id)\
  \ select * from a\n\n\n\n\n-- -- \u0421\u0430\u043C\u044B\u0435 \u0434\u043E\u043B\
  \u0433\u0438\u0435 \u043E\u0442\u0432\u0435\u0442\u044B \u043C\u043E\u0434\u0435\
  \u043B\u0438 \u0442\u043E\u043F 10\n-- SELECT \n--     question,\n--     response_time_s,\n\
  --     answer\n-- FROM llm_logs\n-- ORDER BY response_time_s DESC\n-- LIMIT 10;\n\
  \n\n-- -- \u0420\u0430\u0442\u0438\u043E \u0434\u043B\u0438\u043D\u044B \u0432\u043E\
  \u043F\u0440\u043E\u0441\u0430 \u043A \u0434\u043B\u0438\u043D\u0435 \u043E\u0442\
  \u0432\u0435\u0442\u0430\n-- SELECT \n--     AVG(answer_length::DECIMAL / NULLIF(question_length,\
  \ 0)) AS avg_answer_ratio\n-- FROM llm_logs;\n\n\n\n-- -- \u0421\u0440\u0435\u0434\
  \u043D\u0435\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E\
  \ \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439\
  \ \u0432 \u043D\u0435\u0434\u0435\u043B\u044E\n-- SELECT \n--     AVG(weekly_users)\
  \ AS avg_users_per_week\n-- FROM (\n--     SELECT \n--         DATE_TRUNC('week',\
  \ question_date) AS week_start,\n--         COUNT(DISTINCT user_id) AS weekly_users\n\
  --     FROM llm_logs\n--     GROUP BY week_start\n-- ) AS weekly_stats;\n\n-- --\
  \ \u0421\u0440\u0435\u0434\u043D\u0435\u0435 \u043A\u043E\u043B-\u0432\u043E \u0437\
  \u0430\u043F\u0440\u043E\u0441\u043E\u0432 \u043D\u0430 \u043F\u043E\u043B\u044C\
  \u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\n-- SELECT \n--     AVG(requests_per_user)\
  \ AS avg_requests_per_user\n-- FROM (\n--     SELECT \n--         user_id, COUNT(*)\
  \ AS requests_per_user\n--     FROM llm_logs\n--     GROUP BY user_id\n-- ) AS user_activity;\n\
  \n\n\n-- WITH daily_users AS (\n--     SELECT \n--         DATE(question_date) AS\
  \ day, \n--         COUNT(DISTINCT user_id) AS new_users\n--     FROM llm_logs\n\
  --     GROUP BY day\n-- )\n-- SELECT \n--     day,\n--     SUM(new_users) OVER (ORDER\
  \ BY day) AS cumulative_users\n-- FROM daily_users\n-- ORDER BY day;\n\n\n\n-- SELECT\
  \ \n--     DATE(question_date) AS day, \n--     COUNT(DISTINCT user_id) AS new_users\n\
  -- FROM llm_logs\n-- GROUP BY day\n-- ORDER BY day;\n\n\n-- SELECT \n--     COUNT(CASE\
  \ WHEN request_count = 1 THEN user_id END) * 100.0 / COUNT(*) AS single_use_percentage\n\
  -- FROM (\n--     SELECT user_id, COUNT(*) AS request_count\n--     FROM llm_logs\n\
  --     GROUP BY user_id\n-- ) AS user_requests;\n\n-- WITH user_activity AS (\n\
  --     SELECT \n--         user_id, \n--         COUNT(DISTINCT DATE(question_date))\
  \ AS active_days\n--     FROM llm_logs\n--     GROUP BY user_id\n-- )\n-- SELECT\
  \ AVG(active_days) AS avg_days_per_user\n-- FROM user_activity;\n\n\n-- select *\
  \ from llm_logs \n-- SELECT \n--     user_id, \n--     COUNT(*) AS total_requests\n\
  -- FROM llm_logs\n-- GROUP BY user_id\n-- ORDER BY total_requests DESC\n-- LIMIT\
  \ 10;\n\nSELECT\n    question,\n    answer,\n    feedback\nFROM llm_logs\nORDER\
  \ BY answer_date DESC\nLIMIT 100;\n"
params: null
template_params: null
filter_select_enabled: true
fetch_values_predicate: null
extra: null
normalize_columns: false
always_filter_main_dttm: false
uuid: c234e045-ef72-40b9-b61a-5b35068f0304
metrics:
- metric_name: count
  verbose_name: COUNT(*)
  metric_type: count
  expression: COUNT(*)
  description: null
  d3format: null
  currency: null
  extra: null
  warning_text: null
columns:
- column_name: feedback
  verbose_name: null
  is_dttm: false
  is_active: true
  type: STRING
  advanced_data_type: null
  groupby: true
  filterable: true
  expression: null
  description: null
  python_date_format: null
  extra: null
- column_name: answer
  verbose_name: null
  is_dttm: false
  is_active: true
  type: STRING
  advanced_data_type: null
  groupby: true
  filterable: true
  expression: null
  description: null
  python_date_format: null
  extra: null
- column_name: question
  verbose_name: null
  is_dttm: false
  is_active: true
  type: STRING
  advanced_data_type: null
  groupby: true
  filterable: true
  expression: null
  description: null
  python_date_format: null
  extra: null
version: 1.0.0
database_uuid: f1b89417-aa51-4ff3-80df-d19b5729fbb7
